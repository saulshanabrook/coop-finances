{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json",
  "config": {
    "axis": {
      "labelFontSize": 15,
      "titleFontSize": 20
    },
    "legend": {
      "labelFontSize": 16,
      "titleFontSize": 20,
      "titleLimit": 600
    },
    "view": {
      "continuousHeight": 300,
      "continuousWidth": 400,
      "stroke": "transparent"
    }
  },
  "datasets": {
    "data-2747581c1e4548ac17c17b7029775db3": [
      {
        "category": "Lawyer Fees",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Purchase",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Nevin's Cabin - Labor",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Nevin's Cabin - Materials",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Lawyer Fees",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Purchase",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Nevin's Cabin - Labor",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Nevin's Cabin - Materials",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Renovate Sheds",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Lawyer Fees",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Purchase",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Nevin's Cabin - Labor",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Nevin's Cabin - Materials",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Renovate Sheds",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "House",
        "scenario": "3. Build a house (remove mobile home)"
      }
    ],
    "data-9bb39aadb8cad9cb3aad82363ad99de7": [
      {
        "category": "Mobile Home",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Trailer",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Meditation Cabin",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Mobile Home",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Trailer",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Meditation Cabin",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Renovated Sheds",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Mobile Home",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Trailer",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Meditation Cabin",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Storage Shed + Painting Studio",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Renovated Sheds",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "House",
        "scenario": "3. Build a house (remove mobile home)"
      }
    ],
    "data-a073f211e3b3ccd9f738b6adb08f8cd0": [
      {
        "category": "Investors",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Land Trust",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Property Tax",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Wood",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Propane",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Electric",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Heating Oil",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Internet",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Maintenance",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Insurance",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Bookkeeping",
        "scenario": "1. Purchase property"
      },
      {
        "category": "Investors",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Land Trust",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Property Tax",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Wood",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Propane",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Electric",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Heating Oil",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Internet",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Maintenance",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Insurance",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Bookkeeping",
        "scenario": "2. Renovate existing sheds"
      },
      {
        "category": "Investors",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Land Trust",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Property Tax",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Wood",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Propane",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Electric",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Heating Oil",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Internet",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Maintenance",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Insurance",
        "scenario": "3. Build a house (remove mobile home)"
      },
      {
        "category": "Bookkeeping",
        "scenario": "3. Build a house (remove mobile home)"
      }
    ]
  },
  "resolve": {
    "scale": {
      "color": "independent"
    }
  },
  "title": {
    "align": "left",
    "anchor": "start",
    "fontSize": 30,
    "subtitle": [
      "\ud83d\udc47 Drag the sliders to change \ud83c\udfe1 values \u2763\ufe0f",
      "https://github.com/saulshanabrook/coop-finances"
    ],
    "text": "Valley Housing Coop 38 Rush Road Cost Estimator"
  },
  "vconcat": [
    {
      "data": {
        "name": "data-a073f211e3b3ccd9f738b6adb08f8cd0"
      },
      "encoding": {
        "color": {
          "field": "category",
          "legend": {
            "title": "Monthly costs"
          },
          "scale": {
            "scheme": "teals"
          },
          "type": "nominal"
        },
        "tooltip": [
          {
            "field": "category",
            "type": "nominal"
          },
          {
            "field": "cost",
            "type": "quantitative"
          }
        ],
        "x": {
          "aggregate": "sum",
          "axis": {
            "format": "$.3s",
            "title": "Monthly Cost per Resident"
          },
          "field": "cost",
          "type": "quantitative"
        },
        "y": {
          "axis": {
            "title": null
          },
          "field": "scenario",
          "sort": [
            "1. Purchase property",
            "2. Renovate existing sheds",
            "3. Build a house (remove mobile home)"
          ],
          "type": "ordinal"
        }
      },
      "mark": "bar",
      "selection": {
        "selector001": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 1,
            "name": "\ud83d\ude8c # of ppl in mobile home",
            "step": 1
          },
          "fields": [
            "mobile_home"
          ],
          "init": {
            "mobile_home": 2
          },
          "type": "single"
        },
        "selector002": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 0,
            "name": "\ud83c\udfac # of ppl in studio",
            "step": 1
          },
          "fields": [
            "trailer"
          ],
          "init": {
            "trailer": 1
          },
          "type": "single"
        },
        "selector003": {
          "bind": {
            "input": "radio",
            "labels": [
              "Nevin's Cabin",
              "No meditation cabin"
            ],
            "name": "\ud83e\uddd8 Meditation Cabin",
            "options": [
              true,
              false
            ]
          },
          "fields": [
            "nevins_cabin"
          ],
          "init": {
            "nevins_cabin": true
          },
          "type": "single"
        },
        "selector004": {
          "bind": {
            "input": "radio",
            "labels": [
              "Shipping container before sale",
              "Build before sale",
              "None"
            ],
            "name": "\ud83e\uded9 Storage Shed + Painting Studio",
            "options": [
              "shipping",
              "build",
              0
            ]
          },
          "fields": [
            "storage_shed"
          ],
          "init": {
            "storage_shed": 0
          },
          "type": "single"
        },
        "selector005": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83e\uded9 # of ppl in Storage Shed + Painting Studio",
            "step": 1
          },
          "fields": [
            "storage_shed_people"
          ],
          "init": {
            "storage_shed_people": 2
          },
          "type": "single"
        },
        "selector006": {
          "bind": {
            "input": "range",
            "max": 1500,
            "min": 500,
            "name": "\ud83e\uded9 Storage Shed + Painting Studio sq Ft",
            "step": 250
          },
          "fields": [
            "storage_shed_sq_ft"
          ],
          "init": {
            "storage_shed_sq_ft": 1000
          },
          "type": "single"
        },
        "selector007": {
          "bind": {
            "input": "range",
            "max": 10000,
            "min": 2000,
            "name": "\ud83d\udea2 Shipping Container Cost",
            "step": 1000
          },
          "fields": [
            "shipping_container"
          ],
          "init": {
            "shipping_container": 7000
          },
          "type": "single"
        },
        "selector008": {
          "bind": {
            "input": "range",
            "max": 1,
            "min": 0,
            "name": "\ud83d\udea2 # of ppl in Shipping Container",
            "step": 1
          },
          "fields": [
            "shipping_container_ppl"
          ],
          "init": {
            "shipping_container_ppl": 0
          },
          "type": "single"
        },
        "selector009": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83d\uded6 # of ppl in renovated sheds",
            "step": 1
          },
          "fields": [
            "shed_people"
          ],
          "init": {
            "shed_people": 2
          },
          "type": "single"
        },
        "selector010": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 250,
            "name": "\ud83d\uded6 Renovated sheds sq Ft",
            "step": 250
          },
          "fields": [
            "shed_sq_ft"
          ],
          "init": {
            "shed_sq_ft": 500
          },
          "type": "single"
        },
        "selector011": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83c\udfe0 # of ppl in house",
            "step": 1
          },
          "fields": [
            "house"
          ],
          "init": {
            "house": 3
          },
          "type": "single"
        },
        "selector012": {
          "bind": {
            "input": "range",
            "max": 2500,
            "min": 1000,
            "name": "\ud83c\udfe0 House sq ft",
            "step": 250
          },
          "fields": [
            "house_size"
          ],
          "init": {
            "house_size": 2000
          },
          "type": "single"
        },
        "selector013": {
          "bind": {
            "input": "range",
            "max": 400,
            "min": 100,
            "name": "\ud83d\udc63 Construction cost / sq ft",
            "step": 50
          },
          "fields": [
            "per_sq_ft"
          ],
          "init": {
            "per_sq_ft": 150
          },
          "type": "single"
        },
        "selector014": {
          "bind": {
            "input": "range",
            "max": 0.1,
            "min": 0,
            "name": "\ud83d\udcc8 Investor interest rate",
            "step": 0.01
          },
          "fields": [
            "interest_rate"
          ],
          "init": {
            "interest_rate": 0.03
          },
          "type": "single"
        },
        "selector015": {
          "bind": {
            "input": "radio",
            "labels": [
              "5 years",
              "10 years",
              "15 years",
              "30 years",
              "Investment"
            ],
            "name": "\ud83d\uddd3 Loan Duration",
            "options": [
              60,
              120,
              180,
              360,
              0
            ]
          },
          "fields": [
            "loan_duration"
          ],
          "init": {
            "loan_duration": 360
          },
          "type": "single"
        },
        "selector016": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83e\udd11 Purchase price",
            "step": 10000
          },
          "fields": [
            "property_cost"
          ],
          "init": {
            "property_cost": 150000
          },
          "type": "single"
        },
        "selector017": {
          "bind": {
            "input": "range",
            "max": 20000,
            "min": 2000,
            "name": "\ud83d\udcbc Lawyer fees and closing costs",
            "step": 1000
          },
          "fields": [
            "lawyer_fees"
          ],
          "init": {
            "lawyer_fees": 10000
          },
          "type": "single"
        },
        "selector018": {
          "bind": {
            "input": "range",
            "max": 150000,
            "min": 0,
            "name": "\ud83c\udfde Land value owned by CLT",
            "step": 10000
          },
          "fields": [
            "clt_value"
          ],
          "init": {
            "clt_value": 0
          },
          "type": "single"
        },
        "selector019": {
          "bind": {
            "input": "range",
            "max": 0.05,
            "min": 0.01,
            "name": "\ud83d\udd27 % of building value saved for maintaince",
            "step": 0.01
          },
          "fields": [
            "maintaince"
          ],
          "init": {
            "maintaince": 0.03
          },
          "type": "single"
        },
        "selector020": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83c\uddfa\ud83c\uddf8 Assessed Value (for property taxes)",
            "step": 5000
          },
          "fields": [
            "assessed_value"
          ],
          "init": {
            "assessed_value": 130000
          },
          "type": "single"
        },
        "selector021": {
          "bind": {
            "input": "radio",
            "labels": [
              "Extra Small",
              "Small",
              "Medium"
            ],
            "name": "\ud83d\udcd4 Bookkeeping.coop Service Plan",
            "options": [
              230,
              460,
              1150
            ]
          },
          "fields": [
            "bookkeeping"
          ],
          "init": {
            "bookkeeping": 230
          },
          "type": "single"
        },
        "selector022": {
          "bind": {
            "input": "range",
            "max": 800,
            "min": 300,
            "name": "\ud83c\udfe1 Home Insurance (annual)",
            "step": 100
          },
          "fields": [
            "insurance"
          ],
          "init": {
            "insurance": 500
          },
          "type": "single"
        },
        "selector023": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83e\udeb5 Cords of wood per year",
            "step": 1
          },
          "fields": [
            "cords_wood"
          ],
          "init": {
            "cords_wood": 3
          },
          "type": "single"
        },
        "selector024": {
          "bind": {
            "input": "range",
            "max": 580,
            "min": 0,
            "name": "\ud83d\udd25 Price per cord wood",
            "step": 10
          },
          "fields": [
            "price_per_cord"
          ],
          "init": {
            "price_per_cord": 190
          },
          "type": "single"
        },
        "selector025": {
          "bind": {
            "input": "range",
            "max": 2270,
            "min": 0,
            "name": "\ud83e\udd95 Propane per year",
            "step": 113.5
          },
          "fields": [
            "propane"
          ],
          "init": {
            "propane": 1135
          },
          "type": "single"
        },
        "selector026": {
          "bind": {
            "input": "range",
            "max": 3196,
            "min": 0,
            "name": "\ud83d\udd0c Electric per year",
            "step": 159.8
          },
          "fields": [
            "electric"
          ],
          "init": {
            "electric": 1598
          },
          "type": "single"
        },
        "selector027": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 0,
            "name": "\ud83e\ude94 Heating oil per year",
            "step": 37.5
          },
          "fields": [
            "oil"
          ],
          "init": {
            "oil": 375
          },
          "type": "single"
        }
      },
      "transform": [
        {
          "as": "cost",
          "calculate": "if(((datum.category === 'Bookkeeping') && (datum.scenario === '3. Build a house (remove mobile home)')),(selector021.bookkeeping[0] / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Insurance') && (datum.scenario === '3. Build a house (remove mobile home)')),((selector022.insurance[0] / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Maintenance') && (datum.scenario === '3. Build a house (remove mobile home)')),(((selector019.maintaince[0] * ((((17500 + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) + (selector012.house_size[0] * selector013.per_sq_ft[0])) + 80000)) / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Internet') && (datum.scenario === '3. Build a house (remove mobile home)')),(99 / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Heating Oil') && (datum.scenario === '3. Build a house (remove mobile home)')),((selector027.oil[0] / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Electric') && (datum.scenario === '3. Build a house (remove mobile home)')),((selector026.electric[0] / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Propane') && (datum.scenario === '3. Build a house (remove mobile home)')),((selector025.propane[0] / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Wood') && (datum.scenario === '3. Build a house (remove mobile home)')),(((selector023.cords_wood[0] * selector024.price_per_cord[0]) / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Property Tax') && (datum.scenario === '3. Build a house (remove mobile home)')),((((selector020.assessed_value[0] * 2.32) / 100) / 12) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Land Trust') && (datum.scenario === '3. Build a house (remove mobile home)')),(if((selector018.clt_value[0] <= 0),0,75) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Investors') && (datum.scenario === '3. Build a house (remove mobile home)')),(if((selector015.loan_duration[0] === 0),((selector014.interest_rate[0] / 12) * (((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) + (selector012.house_size[0] * selector013.per_sq_ft[0]))),if(((selector014.interest_rate[0] / 12) === 0),((((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) + (selector012.house_size[0] * selector013.per_sq_ft[0])) / selector015.loan_duration[0]),(((selector014.interest_rate[0] / 12) * (((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) + (selector012.house_size[0] * selector013.per_sq_ft[0]))) / (1 - pow((1 + (selector014.interest_rate[0] / 12)),(-selector015.loan_duration[0])))))) / (((((0 + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0]) + selector011.house[0])),if(((datum.category === 'Bookkeeping') && (datum.scenario === '2. Renovate existing sheds')),(selector021.bookkeeping[0] / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Insurance') && (datum.scenario === '2. Renovate existing sheds')),((selector022.insurance[0] / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Maintenance') && (datum.scenario === '2. Renovate existing sheds')),(((selector019.maintaince[0] * (((17500 + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) + 80000)) / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Internet') && (datum.scenario === '2. Renovate existing sheds')),(99 / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Heating Oil') && (datum.scenario === '2. Renovate existing sheds')),((selector027.oil[0] / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Electric') && (datum.scenario === '2. Renovate existing sheds')),((selector026.electric[0] / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Propane') && (datum.scenario === '2. Renovate existing sheds')),((selector025.propane[0] / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Wood') && (datum.scenario === '2. Renovate existing sheds')),(((selector023.cords_wood[0] * selector024.price_per_cord[0]) / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Property Tax') && (datum.scenario === '2. Renovate existing sheds')),((((selector020.assessed_value[0] * 2.32) / 100) / 12) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Land Trust') && (datum.scenario === '2. Renovate existing sheds')),(if((selector018.clt_value[0] <= 0),0,75) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Investors') && (datum.scenario === '2. Renovate existing sheds')),(if((selector015.loan_duration[0] === 0),((selector014.interest_rate[0] / 12) * ((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0]))),if(((selector014.interest_rate[0] / 12) === 0),(((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0])) / selector015.loan_duration[0]),(((selector014.interest_rate[0] / 12) * ((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + (selector010.shed_sq_ft[0] * selector013.per_sq_ft[0]))) / (1 - pow((1 + (selector014.interest_rate[0] / 12)),(-selector015.loan_duration[0])))))) / (((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0))) + selector009.shed_people[0])),if(((datum.category === 'Bookkeeping') && (datum.scenario === '1. Purchase property')),(selector021.bookkeeping[0] / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Insurance') && (datum.scenario === '1. Purchase property')),((selector022.insurance[0] / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Maintenance') && (datum.scenario === '1. Purchase property')),(((selector019.maintaince[0] * ((17500 + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) + 80000)) / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Internet') && (datum.scenario === '1. Purchase property')),(99 / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Heating Oil') && (datum.scenario === '1. Purchase property')),((selector027.oil[0] / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Electric') && (datum.scenario === '1. Purchase property')),((selector026.electric[0] / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Propane') && (datum.scenario === '1. Purchase property')),((selector025.propane[0] / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Wood') && (datum.scenario === '1. Purchase property')),(((selector023.cords_wood[0] * selector024.price_per_cord[0]) / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Property Tax') && (datum.scenario === '1. Purchase property')),((((selector020.assessed_value[0] * 2.32) / 100) / 12) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Land Trust') && (datum.scenario === '1. Purchase property')),(if((selector018.clt_value[0] <= 0),0,75) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),if(((datum.category === 'Investors') && (datum.scenario === '1. Purchase property')),(if((selector015.loan_duration[0] === 0),((selector014.interest_rate[0] / 12) * (((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0)))),if(((selector014.interest_rate[0] / 12) === 0),((((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0))) / selector015.loan_duration[0]),(((selector014.interest_rate[0] / 12) * (((((0 + selector017.lawyer_fees[0]) + (selector016.property_cost[0] - selector018.clt_value[0])) + 12500) + 5000) + if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0)))) / (1 - pow((1 + (selector014.interest_rate[0] / 12)),(-selector015.loan_duration[0])))))) / ((((0 + selector001.mobile_home[0]) + selector002.trailer[0]) + if(selector003.nevins_cabin[0],1,0)) + if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)))),null)))))))))))))))))))))))))))))))))"
        }
      ]
    },
    {
      "data": {
        "name": "data-9bb39aadb8cad9cb3aad82363ad99de7"
      },
      "encoding": {
        "color": {
          "field": "category",
          "legend": {
            "title": "Living spaces"
          },
          "scale": {
            "scheme": "purples"
          },
          "type": "nominal"
        },
        "tooltip": [
          {
            "field": "category",
            "type": "nominal"
          },
          {
            "field": "number_people",
            "type": "quantitative"
          }
        ],
        "x": {
          "aggregate": "sum",
          "axis": {
            "tickMinStep": 1,
            "title": "# Residents"
          },
          "field": "number_people",
          "type": "quantitative"
        },
        "y": {
          "axis": {
            "title": null
          },
          "field": "scenario",
          "sort": [
            "1. Purchase property",
            "2. Renovate existing sheds",
            "3. Build a house (remove mobile home)"
          ],
          "type": "ordinal"
        }
      },
      "mark": "bar",
      "selection": {
        "selector001": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 1,
            "name": "\ud83d\ude8c # of ppl in mobile home",
            "step": 1
          },
          "fields": [
            "mobile_home"
          ],
          "init": {
            "mobile_home": 2
          },
          "type": "single"
        },
        "selector002": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 0,
            "name": "\ud83c\udfac # of ppl in studio",
            "step": 1
          },
          "fields": [
            "trailer"
          ],
          "init": {
            "trailer": 1
          },
          "type": "single"
        },
        "selector003": {
          "bind": {
            "input": "radio",
            "labels": [
              "Nevin's Cabin",
              "No meditation cabin"
            ],
            "name": "\ud83e\uddd8 Meditation Cabin",
            "options": [
              true,
              false
            ]
          },
          "fields": [
            "nevins_cabin"
          ],
          "init": {
            "nevins_cabin": true
          },
          "type": "single"
        },
        "selector004": {
          "bind": {
            "input": "radio",
            "labels": [
              "Shipping container before sale",
              "Build before sale",
              "None"
            ],
            "name": "\ud83e\uded9 Storage Shed + Painting Studio",
            "options": [
              "shipping",
              "build",
              0
            ]
          },
          "fields": [
            "storage_shed"
          ],
          "init": {
            "storage_shed": 0
          },
          "type": "single"
        },
        "selector005": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83e\uded9 # of ppl in Storage Shed + Painting Studio",
            "step": 1
          },
          "fields": [
            "storage_shed_people"
          ],
          "init": {
            "storage_shed_people": 2
          },
          "type": "single"
        },
        "selector006": {
          "bind": {
            "input": "range",
            "max": 1500,
            "min": 500,
            "name": "\ud83e\uded9 Storage Shed + Painting Studio sq Ft",
            "step": 250
          },
          "fields": [
            "storage_shed_sq_ft"
          ],
          "init": {
            "storage_shed_sq_ft": 1000
          },
          "type": "single"
        },
        "selector007": {
          "bind": {
            "input": "range",
            "max": 10000,
            "min": 2000,
            "name": "\ud83d\udea2 Shipping Container Cost",
            "step": 1000
          },
          "fields": [
            "shipping_container"
          ],
          "init": {
            "shipping_container": 7000
          },
          "type": "single"
        },
        "selector008": {
          "bind": {
            "input": "range",
            "max": 1,
            "min": 0,
            "name": "\ud83d\udea2 # of ppl in Shipping Container",
            "step": 1
          },
          "fields": [
            "shipping_container_ppl"
          ],
          "init": {
            "shipping_container_ppl": 0
          },
          "type": "single"
        },
        "selector009": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83d\uded6 # of ppl in renovated sheds",
            "step": 1
          },
          "fields": [
            "shed_people"
          ],
          "init": {
            "shed_people": 2
          },
          "type": "single"
        },
        "selector010": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 250,
            "name": "\ud83d\uded6 Renovated sheds sq Ft",
            "step": 250
          },
          "fields": [
            "shed_sq_ft"
          ],
          "init": {
            "shed_sq_ft": 500
          },
          "type": "single"
        },
        "selector011": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83c\udfe0 # of ppl in house",
            "step": 1
          },
          "fields": [
            "house"
          ],
          "init": {
            "house": 3
          },
          "type": "single"
        },
        "selector012": {
          "bind": {
            "input": "range",
            "max": 2500,
            "min": 1000,
            "name": "\ud83c\udfe0 House sq ft",
            "step": 250
          },
          "fields": [
            "house_size"
          ],
          "init": {
            "house_size": 2000
          },
          "type": "single"
        },
        "selector013": {
          "bind": {
            "input": "range",
            "max": 400,
            "min": 100,
            "name": "\ud83d\udc63 Construction cost / sq ft",
            "step": 50
          },
          "fields": [
            "per_sq_ft"
          ],
          "init": {
            "per_sq_ft": 150
          },
          "type": "single"
        },
        "selector014": {
          "bind": {
            "input": "range",
            "max": 0.1,
            "min": 0,
            "name": "\ud83d\udcc8 Investor interest rate",
            "step": 0.01
          },
          "fields": [
            "interest_rate"
          ],
          "init": {
            "interest_rate": 0.03
          },
          "type": "single"
        },
        "selector015": {
          "bind": {
            "input": "radio",
            "labels": [
              "5 years",
              "10 years",
              "15 years",
              "30 years",
              "Investment"
            ],
            "name": "\ud83d\uddd3 Loan Duration",
            "options": [
              60,
              120,
              180,
              360,
              0
            ]
          },
          "fields": [
            "loan_duration"
          ],
          "init": {
            "loan_duration": 360
          },
          "type": "single"
        },
        "selector016": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83e\udd11 Purchase price",
            "step": 10000
          },
          "fields": [
            "property_cost"
          ],
          "init": {
            "property_cost": 150000
          },
          "type": "single"
        },
        "selector017": {
          "bind": {
            "input": "range",
            "max": 20000,
            "min": 2000,
            "name": "\ud83d\udcbc Lawyer fees and closing costs",
            "step": 1000
          },
          "fields": [
            "lawyer_fees"
          ],
          "init": {
            "lawyer_fees": 10000
          },
          "type": "single"
        },
        "selector018": {
          "bind": {
            "input": "range",
            "max": 150000,
            "min": 0,
            "name": "\ud83c\udfde Land value owned by CLT",
            "step": 10000
          },
          "fields": [
            "clt_value"
          ],
          "init": {
            "clt_value": 0
          },
          "type": "single"
        },
        "selector019": {
          "bind": {
            "input": "range",
            "max": 0.05,
            "min": 0.01,
            "name": "\ud83d\udd27 % of building value saved for maintaince",
            "step": 0.01
          },
          "fields": [
            "maintaince"
          ],
          "init": {
            "maintaince": 0.03
          },
          "type": "single"
        },
        "selector020": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83c\uddfa\ud83c\uddf8 Assessed Value (for property taxes)",
            "step": 5000
          },
          "fields": [
            "assessed_value"
          ],
          "init": {
            "assessed_value": 130000
          },
          "type": "single"
        },
        "selector021": {
          "bind": {
            "input": "radio",
            "labels": [
              "Extra Small",
              "Small",
              "Medium"
            ],
            "name": "\ud83d\udcd4 Bookkeeping.coop Service Plan",
            "options": [
              230,
              460,
              1150
            ]
          },
          "fields": [
            "bookkeeping"
          ],
          "init": {
            "bookkeeping": 230
          },
          "type": "single"
        },
        "selector022": {
          "bind": {
            "input": "range",
            "max": 800,
            "min": 300,
            "name": "\ud83c\udfe1 Home Insurance (annual)",
            "step": 100
          },
          "fields": [
            "insurance"
          ],
          "init": {
            "insurance": 500
          },
          "type": "single"
        },
        "selector023": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83e\udeb5 Cords of wood per year",
            "step": 1
          },
          "fields": [
            "cords_wood"
          ],
          "init": {
            "cords_wood": 3
          },
          "type": "single"
        },
        "selector024": {
          "bind": {
            "input": "range",
            "max": 580,
            "min": 0,
            "name": "\ud83d\udd25 Price per cord wood",
            "step": 10
          },
          "fields": [
            "price_per_cord"
          ],
          "init": {
            "price_per_cord": 190
          },
          "type": "single"
        },
        "selector025": {
          "bind": {
            "input": "range",
            "max": 2270,
            "min": 0,
            "name": "\ud83e\udd95 Propane per year",
            "step": 113.5
          },
          "fields": [
            "propane"
          ],
          "init": {
            "propane": 1135
          },
          "type": "single"
        },
        "selector026": {
          "bind": {
            "input": "range",
            "max": 3196,
            "min": 0,
            "name": "\ud83d\udd0c Electric per year",
            "step": 159.8
          },
          "fields": [
            "electric"
          ],
          "init": {
            "electric": 1598
          },
          "type": "single"
        },
        "selector027": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 0,
            "name": "\ud83e\ude94 Heating oil per year",
            "step": 37.5
          },
          "fields": [
            "oil"
          ],
          "init": {
            "oil": 375
          },
          "type": "single"
        }
      },
      "transform": [
        {
          "as": "number_people",
          "calculate": "if(((datum.category === 'House') && (datum.scenario === '3. Build a house (remove mobile home)')),selector011.house[0],if(((datum.category === 'Renovated Sheds') && (datum.scenario === '3. Build a house (remove mobile home)')),selector009.shed_people[0],if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '3. Build a house (remove mobile home)')),if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)),if(((datum.category === 'Meditation Cabin') && (datum.scenario === '3. Build a house (remove mobile home)')),if(selector003.nevins_cabin[0],1,0),if(((datum.category === 'Trailer') && (datum.scenario === '3. Build a house (remove mobile home)')),selector002.trailer[0],if(((datum.category === 'Mobile Home') && (datum.scenario === '3. Build a house (remove mobile home)')),0,if(((datum.category === 'Renovated Sheds') && (datum.scenario === '2. Renovate existing sheds')),selector009.shed_people[0],if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '2. Renovate existing sheds')),if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)),if(((datum.category === 'Meditation Cabin') && (datum.scenario === '2. Renovate existing sheds')),if(selector003.nevins_cabin[0],1,0),if(((datum.category === 'Trailer') && (datum.scenario === '2. Renovate existing sheds')),selector002.trailer[0],if(((datum.category === 'Mobile Home') && (datum.scenario === '2. Renovate existing sheds')),selector001.mobile_home[0],if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '1. Purchase property')),if((selector004.storage_shed[0] === 'shipping'),selector008.shipping_container_ppl[0],if((selector004.storage_shed[0] === 'build'),selector005.storage_shed_people[0],0)),if(((datum.category === 'Meditation Cabin') && (datum.scenario === '1. Purchase property')),if(selector003.nevins_cabin[0],1,0),if(((datum.category === 'Trailer') && (datum.scenario === '1. Purchase property')),selector002.trailer[0],if(((datum.category === 'Mobile Home') && (datum.scenario === '1. Purchase property')),selector001.mobile_home[0],null)))))))))))))))"
        }
      ]
    },
    {
      "data": {
        "name": "data-2747581c1e4548ac17c17b7029775db3"
      },
      "encoding": {
        "color": {
          "field": "category",
          "legend": {
            "title": "Funding needs"
          },
          "scale": {
            "scheme": "greens"
          },
          "type": "nominal"
        },
        "tooltip": [
          {
            "field": "category",
            "type": "nominal"
          },
          {
            "field": "upfront_cost",
            "type": "quantitative"
          }
        ],
        "x": {
          "aggregate": "sum",
          "axis": {
            "format": "$.3s",
            "title": "Required Investment"
          },
          "field": "upfront_cost",
          "type": "quantitative"
        },
        "y": {
          "axis": {
            "title": null
          },
          "field": "scenario",
          "sort": [
            "1. Purchase property",
            "2. Renovate existing sheds",
            "3. Build a house (remove mobile home)"
          ],
          "type": "ordinal"
        }
      },
      "mark": "bar",
      "selection": {
        "selector001": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 1,
            "name": "\ud83d\ude8c # of ppl in mobile home",
            "step": 1
          },
          "fields": [
            "mobile_home"
          ],
          "init": {
            "mobile_home": 2
          },
          "type": "single"
        },
        "selector002": {
          "bind": {
            "input": "range",
            "max": 4,
            "min": 0,
            "name": "\ud83c\udfac # of ppl in studio",
            "step": 1
          },
          "fields": [
            "trailer"
          ],
          "init": {
            "trailer": 1
          },
          "type": "single"
        },
        "selector003": {
          "bind": {
            "input": "radio",
            "labels": [
              "Nevin's Cabin",
              "No meditation cabin"
            ],
            "name": "\ud83e\uddd8 Meditation Cabin",
            "options": [
              true,
              false
            ]
          },
          "fields": [
            "nevins_cabin"
          ],
          "init": {
            "nevins_cabin": true
          },
          "type": "single"
        },
        "selector004": {
          "bind": {
            "input": "radio",
            "labels": [
              "Shipping container before sale",
              "Build before sale",
              "None"
            ],
            "name": "\ud83e\uded9 Storage Shed + Painting Studio",
            "options": [
              "shipping",
              "build",
              0
            ]
          },
          "fields": [
            "storage_shed"
          ],
          "init": {
            "storage_shed": 0
          },
          "type": "single"
        },
        "selector005": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83e\uded9 # of ppl in Storage Shed + Painting Studio",
            "step": 1
          },
          "fields": [
            "storage_shed_people"
          ],
          "init": {
            "storage_shed_people": 2
          },
          "type": "single"
        },
        "selector006": {
          "bind": {
            "input": "range",
            "max": 1500,
            "min": 500,
            "name": "\ud83e\uded9 Storage Shed + Painting Studio sq Ft",
            "step": 250
          },
          "fields": [
            "storage_shed_sq_ft"
          ],
          "init": {
            "storage_shed_sq_ft": 1000
          },
          "type": "single"
        },
        "selector007": {
          "bind": {
            "input": "range",
            "max": 10000,
            "min": 2000,
            "name": "\ud83d\udea2 Shipping Container Cost",
            "step": 1000
          },
          "fields": [
            "shipping_container"
          ],
          "init": {
            "shipping_container": 7000
          },
          "type": "single"
        },
        "selector008": {
          "bind": {
            "input": "range",
            "max": 1,
            "min": 0,
            "name": "\ud83d\udea2 # of ppl in Shipping Container",
            "step": 1
          },
          "fields": [
            "shipping_container_ppl"
          ],
          "init": {
            "shipping_container_ppl": 0
          },
          "type": "single"
        },
        "selector009": {
          "bind": {
            "input": "range",
            "max": 3,
            "min": 0,
            "name": "\ud83d\uded6 # of ppl in renovated sheds",
            "step": 1
          },
          "fields": [
            "shed_people"
          ],
          "init": {
            "shed_people": 2
          },
          "type": "single"
        },
        "selector010": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 250,
            "name": "\ud83d\uded6 Renovated sheds sq Ft",
            "step": 250
          },
          "fields": [
            "shed_sq_ft"
          ],
          "init": {
            "shed_sq_ft": 500
          },
          "type": "single"
        },
        "selector011": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83c\udfe0 # of ppl in house",
            "step": 1
          },
          "fields": [
            "house"
          ],
          "init": {
            "house": 3
          },
          "type": "single"
        },
        "selector012": {
          "bind": {
            "input": "range",
            "max": 2500,
            "min": 1000,
            "name": "\ud83c\udfe0 House sq ft",
            "step": 250
          },
          "fields": [
            "house_size"
          ],
          "init": {
            "house_size": 2000
          },
          "type": "single"
        },
        "selector013": {
          "bind": {
            "input": "range",
            "max": 400,
            "min": 100,
            "name": "\ud83d\udc63 Construction cost / sq ft",
            "step": 50
          },
          "fields": [
            "per_sq_ft"
          ],
          "init": {
            "per_sq_ft": 150
          },
          "type": "single"
        },
        "selector014": {
          "bind": {
            "input": "range",
            "max": 0.1,
            "min": 0,
            "name": "\ud83d\udcc8 Investor interest rate",
            "step": 0.01
          },
          "fields": [
            "interest_rate"
          ],
          "init": {
            "interest_rate": 0.03
          },
          "type": "single"
        },
        "selector015": {
          "bind": {
            "input": "radio",
            "labels": [
              "5 years",
              "10 years",
              "15 years",
              "30 years",
              "Investment"
            ],
            "name": "\ud83d\uddd3 Loan Duration",
            "options": [
              60,
              120,
              180,
              360,
              0
            ]
          },
          "fields": [
            "loan_duration"
          ],
          "init": {
            "loan_duration": 360
          },
          "type": "single"
        },
        "selector016": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83e\udd11 Purchase price",
            "step": 10000
          },
          "fields": [
            "property_cost"
          ],
          "init": {
            "property_cost": 150000
          },
          "type": "single"
        },
        "selector017": {
          "bind": {
            "input": "range",
            "max": 20000,
            "min": 2000,
            "name": "\ud83d\udcbc Lawyer fees and closing costs",
            "step": 1000
          },
          "fields": [
            "lawyer_fees"
          ],
          "init": {
            "lawyer_fees": 10000
          },
          "type": "single"
        },
        "selector018": {
          "bind": {
            "input": "range",
            "max": 150000,
            "min": 0,
            "name": "\ud83c\udfde Land value owned by CLT",
            "step": 10000
          },
          "fields": [
            "clt_value"
          ],
          "init": {
            "clt_value": 0
          },
          "type": "single"
        },
        "selector019": {
          "bind": {
            "input": "range",
            "max": 0.05,
            "min": 0.01,
            "name": "\ud83d\udd27 % of building value saved for maintaince",
            "step": 0.01
          },
          "fields": [
            "maintaince"
          ],
          "init": {
            "maintaince": 0.03
          },
          "type": "single"
        },
        "selector020": {
          "bind": {
            "input": "range",
            "max": 300000,
            "min": 110000,
            "name": "\ud83c\uddfa\ud83c\uddf8 Assessed Value (for property taxes)",
            "step": 5000
          },
          "fields": [
            "assessed_value"
          ],
          "init": {
            "assessed_value": 130000
          },
          "type": "single"
        },
        "selector021": {
          "bind": {
            "input": "radio",
            "labels": [
              "Extra Small",
              "Small",
              "Medium"
            ],
            "name": "\ud83d\udcd4 Bookkeeping.coop Service Plan",
            "options": [
              230,
              460,
              1150
            ]
          },
          "fields": [
            "bookkeeping"
          ],
          "init": {
            "bookkeeping": 230
          },
          "type": "single"
        },
        "selector022": {
          "bind": {
            "input": "range",
            "max": 800,
            "min": 300,
            "name": "\ud83c\udfe1 Home Insurance (annual)",
            "step": 100
          },
          "fields": [
            "insurance"
          ],
          "init": {
            "insurance": 500
          },
          "type": "single"
        },
        "selector023": {
          "bind": {
            "input": "range",
            "max": 5,
            "min": 0,
            "name": "\ud83e\udeb5 Cords of wood per year",
            "step": 1
          },
          "fields": [
            "cords_wood"
          ],
          "init": {
            "cords_wood": 3
          },
          "type": "single"
        },
        "selector024": {
          "bind": {
            "input": "range",
            "max": 580,
            "min": 0,
            "name": "\ud83d\udd25 Price per cord wood",
            "step": 10
          },
          "fields": [
            "price_per_cord"
          ],
          "init": {
            "price_per_cord": 190
          },
          "type": "single"
        },
        "selector025": {
          "bind": {
            "input": "range",
            "max": 2270,
            "min": 0,
            "name": "\ud83e\udd95 Propane per year",
            "step": 113.5
          },
          "fields": [
            "propane"
          ],
          "init": {
            "propane": 1135
          },
          "type": "single"
        },
        "selector026": {
          "bind": {
            "input": "range",
            "max": 3196,
            "min": 0,
            "name": "\ud83d\udd0c Electric per year",
            "step": 159.8
          },
          "fields": [
            "electric"
          ],
          "init": {
            "electric": 1598
          },
          "type": "single"
        },
        "selector027": {
          "bind": {
            "input": "range",
            "max": 750,
            "min": 0,
            "name": "\ud83e\ude94 Heating oil per year",
            "step": 37.5
          },
          "fields": [
            "oil"
          ],
          "init": {
            "oil": 375
          },
          "type": "single"
        }
      },
      "transform": [
        {
          "as": "upfront_cost",
          "calculate": "if(((datum.category === 'House') && (datum.scenario === '3. Build a house (remove mobile home)')),(selector012.house_size[0] * selector013.per_sq_ft[0]),if(((datum.category === 'Renovate Sheds') && (datum.scenario === '3. Build a house (remove mobile home)')),(selector010.shed_sq_ft[0] * selector013.per_sq_ft[0]),if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '3. Build a house (remove mobile home)')),if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0)),if(((datum.category === \"Nevin's Cabin - Materials\") && (datum.scenario === '3. Build a house (remove mobile home)')),5000,if(((datum.category === \"Nevin's Cabin - Labor\") && (datum.scenario === '3. Build a house (remove mobile home)')),12500,if(((datum.category === 'Purchase') && (datum.scenario === '3. Build a house (remove mobile home)')),(selector016.property_cost[0] - selector018.clt_value[0]),if(((datum.category === 'Lawyer Fees') && (datum.scenario === '3. Build a house (remove mobile home)')),selector017.lawyer_fees[0],if(((datum.category === 'Renovate Sheds') && (datum.scenario === '2. Renovate existing sheds')),(selector010.shed_sq_ft[0] * selector013.per_sq_ft[0]),if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '2. Renovate existing sheds')),if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0)),if(((datum.category === \"Nevin's Cabin - Materials\") && (datum.scenario === '2. Renovate existing sheds')),5000,if(((datum.category === \"Nevin's Cabin - Labor\") && (datum.scenario === '2. Renovate existing sheds')),12500,if(((datum.category === 'Purchase') && (datum.scenario === '2. Renovate existing sheds')),(selector016.property_cost[0] - selector018.clt_value[0]),if(((datum.category === 'Lawyer Fees') && (datum.scenario === '2. Renovate existing sheds')),selector017.lawyer_fees[0],if(((datum.category === 'Storage Shed + Painting Studio') && (datum.scenario === '1. Purchase property')),if((selector004.storage_shed[0] === 'shipping'),selector007.shipping_container[0],if((selector004.storage_shed[0] === 'build'),(selector006.storage_shed_sq_ft[0] * selector013.per_sq_ft[0]),0)),if(((datum.category === \"Nevin's Cabin - Materials\") && (datum.scenario === '1. Purchase property')),5000,if(((datum.category === \"Nevin's Cabin - Labor\") && (datum.scenario === '1. Purchase property')),12500,if(((datum.category === 'Purchase') && (datum.scenario === '1. Purchase property')),(selector016.property_cost[0] - selector018.clt_value[0]),if(((datum.category === 'Lawyer Fees') && (datum.scenario === '1. Purchase property')),selector017.lawyer_fees[0],null))))))))))))))))))"
        }
      ]
    }
  ]
}